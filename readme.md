NAGOMI PowerHAL (EAS) - 技術架構概覽NAGOMI PowerHAL (High Appetite Layer) 是一個專為 NAGOMI 自助餐設計的「食慾感知排程器 (EAS, Eat Aware Scheduler)」。本專案旨在透過 AI 視覺辨識與量化數據，最大化使用者的用餐 ROI (Return on Investment) 與健康監控。1. 系統架構圖 (Architecture)graph TD
    User[使用者 (Mobile Web)] -->|上傳照片/手動輸入| Frontend[前端 (React SPA)]
    Frontend -->|讀取菜單 CSV| GSheet[Google Sheets (Database)]
    Frontend -->|影像辨識請求| Vercel[Vercel Serverless API (Planned)]
    Vercel -->|轉發請求 + 隱藏 Key| Gemini[Google Gemini 2.5 Flash]
    Vercel -->|回傳 JSON| Frontend
    Frontend -->|本地存儲| LocalStorage[Browser LocalStorage]
2. 前端設計 (Frontend - React SPA)核心應用是一個單頁式應用程式 (SPA)，專注於極致的行動端體驗與即時反饋。核心技術：React, Tailwind CSS, Lucide Icons。視覺風格：採暗色系 (Dark Mode) 與 Cyberpunk/Kernel 風格，結合 Linux Kernel 術語 (如 GOVERNOR, THERMAL_LOAD) 增加趣味性。主要模組：INPUT (開吃)：整合相機 API 與手動輸入介面。支援 gemini-2.5-flash 模型進行多模態影像辨識，自動計數與估價。SYSFS (戰情室)：即時儀表板。計算 ROI 進度、熱量負載與液體攝取量。根據時間區段 (Lunch/Dinner) 自動切換預算設定。DMESG (紀錄)：歷史進食序列紀錄 (History Log)，支援資料持久化 (LocalStorage)。攻略圖鑑：支援「預估市價」與「飯店定價」雙模式切換，含 CP 值排序演算法。3. 資料層 (Data Layer - Google Sheets)採用 "No-Code Backend" 策略，利用 Google Sheets 作為輕量級 CMS (Content Management System)。實作方式：維護一份 Master Menu Sheet (包含品名、市價、飯店價、熱量、分類)。將 Sheet 「發布為 Web (CSV)」。前端透過 fetch() 直接讀取 CSV 串流，並透過自研的 Smart CSV Parser 進行欄位對應與解析。優勢：營運人員 (非工程師) 可隨時調整價格或新增菜色，前端重新整理即生效。零伺服器成本，高可用性。4. 未來規劃：Vercel API Wrapper目前的 MVP 版本直接在前端呼叫 Gemini API。為了增強安全性與擴充性，計劃導入 Vercel Serverless Functions。安全代理 (Secure Proxy)：將 Gemini API Key 移至後端環境變數 (process.env.GEMINI_API_KEY)。前端僅呼叫 /api/analyze，避免 API Key 暴露於客戶端瀏覽器。排行榜後端 (Leaderboard Backend)：利用 Vercel KV (Redis) 或 Postgres 儲存使用者的 payback_score。建立全網「回本排行榜」，增加社群競爭樂趣。5. 技術棧總結 (Tech Stack)Frontend: React 18, Tailwind CSSAI Model: Google Gemini 2.5 Flash (Multimodal)Database (Static): Google Sheets (CSV Publish)Backend (Planned): Vercel Serverless Functions (Node.js)Icons: Lucide React
